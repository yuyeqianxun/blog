<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .container{
        height: 450px;
        overflow: auto;
      }
      .wrapper{
        padding: 0;
        margin: 0;
      }
      .item{
        border:1px solid #dddddd;
        height: 50px;
        margin-bottom: 8px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <ul class="wrapper">
        <li class="item"></li>
      </ul>
    </div>
    <script>
      class Virtual {
        constructor(contain,scroll,data,itemHeight) {
          this.contain = document.querySelector(contain);
          this.scroll = document.querySelector(scroll);
          this.itemHeight = itemHeight;
          this.totalHeight = itemHeight*data.length;
          this.showLength = Math.ceil(this.contain.clientHeight/itemHeight);
          this.start = 0;
          this.end = 0;
          this.data = data;
          this.createDom();
          this.contain.addEventListener('scroll',()=>{
            this.createDom();
          })
        }

        createDom() {
          this.start = Math.floor(this.contain.scrollTop/this.itemHeight);
          this.end =  this.start + this.showLength;
          this.scroll.style.marginTop = this.start*this.itemHeight + 'px';
          this.scroll.style.height = (this.totalHeight-this.start*this.itemHeight) + 'px';
          let dom = '';
          this.data.slice(this.start,this.end).forEach(i=>{
            dom+=`<li class="item">${i}</li>`
          });
          this.scroll.innerHTML=dom;
        }
      }
      let list = Array.from(Array(99).keys()),
      itemHeight = 60;
      new Virtual(".container",".wrapper",list,itemHeight)
    </script>
  </body>
</html>
